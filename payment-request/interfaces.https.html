<!doctype html>
<meta charset=utf-8>
<title>Payment Request interface IDL tests</title>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<script src=/resources/WebIDLParser.js></script>
<script src=/resources/idlharness.js></script>
<script>
promise_test(async () => {
  const idlArray = new IdlArray();
  const untestedIDL = `
    interface EventHandler {};
    interface Event {};
    interface EventInit {};
    interface EventTarget {};
  `;
  idlArray.add_untested_idls(untestedIDL);
  const testedIdl = await fetch("/interfaces/payment-request.idl").then(r =>
    r.text()
  );
  idlArray.add_idls(testedIdl);
  const methods = "[{supportedMethods: 'foo'}]";
  const amount = "{currency: 'USD', value: '0'}";
  const details = `{total: {label: 'bar', amount: ${amount} }}`;
  idlArray.add_objects({
    PaymentRequest: [`new PaymentRequest(${methods}, ${details})`],
  });
  idlArray.test();
}, "Must have a conforming IDL implementation of the Payment Request API.");
</script>
